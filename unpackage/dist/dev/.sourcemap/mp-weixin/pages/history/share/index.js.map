{"version":3,"sources":["webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/main.js","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/history/share/index.vue?2ae1","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/history/share/index.vue?4c9a","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/history/share/index.vue?d5a1","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/history/share/index.vue?85dd","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/history/share/index.vue"],"names":["createPage","Page","data","shareText","image","shareType","providerList","checkState","computed","canShare","onShareAppMessage","title","path","imageUrl","onLoad","option","i18n_pages","share","name","methods","focusTextarea","console","log","checkTextarea","msgSecCheck","isOk","chooseImage","uni","count","sourceType","sizeType","success","res","tempFilePaths","compress","img","Promise","localPath","plus","io","convertAbsoluteFileSystem","replace","resolveLocalFileSystemURL","entry","file","JSON","stringify","size","zip","compressImage","src","dst","width","height","quality","overwrite","event","newImg","error","showModal","content","showCancel","e","message"],"mappings":"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","file":"pages/history/share/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/history/share/index.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4199df00&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX.2.1.1.20190716.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('4199df00', component.options)\n    } else {\n      api.reload('4199df00', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=4199df00&\", function () {\n      api.rerender('4199df00', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/history/share/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=4199df00&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { stringFormat, throttle } from 'common/index'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tshareText: '',\n\t\t\timage: 'cloud://finduname-s9wdm.6669-finduname-s9wdm-1259413430/logo/logo.png',\n\t\t\tshareType:1,\n\t\t\tproviderList: [],\n\t\t\tcheckState : 'ok'\n\t\t}\n\t},\n\t// watch: {\n\t// \tshareText(newValue, oldValue) {\n\t// \t\tthis.checkState = 'ing'\n\t// \t\tthis.test()\n\t// \t}\n\t// },\n\tcomputed:{\n\t\tcanShare(){\n\t\t\treturn this.checkState===\"ok\"\n\t\t}\n\t},\n\tonShareAppMessage:function() {\n\t\t// console.log(\"onShareAppMessage\")\n\t\t// this.msgSecCheck(\"完2347全dfji试3726测asad感3847知qwez到\").then(res=>{\n\t\t// \tlet title = \"欢迎体验 name名\"\n\t\t// \tif(res){\n\t\t// \t\ttitle = this.shareText\n\t\t// \t}\n\t\t// \treturn {\n\t\t// \t\ttitle,\n\t\t// \t\tpath: '/pages/home/index',\n\t\t// \t\timageUrl:this.image ? this.image : 'cloud://finduname-s9wdm.6669-finduname-s9wdm-1259413430/logo/logo.png'\n\t\t// \t}\n\t\t// })\n\t\treturn {\n\t\t\ttitle: this.shareText,\n\t\t\tpath: '/pages/home/index',\n\t\t\timageUrl:'cloud://finduname-s9wdm.6669-finduname-s9wdm-1259413430/logo/logo.png'\n\t\t}\n\t},\n\tonLoad: function (option) {\n\t\tthis.shareText = stringFormat(this.i18n_pages.share.shareText,option.name)\n\t},\n\tmethods: {\n\t\tfocusTextarea(){//当聚焦到文字内容\n\t\t\tconsole.log(\"focusTextarea\")\n\t\t\tthis.checkState = 'ing'\n\t\t},\n\t\tcheckTextarea:async function(){//完成后的检查文字内容\n\t\t\tlet isOk = await this.msgSecCheck(this.shareText)\n\t\t\tconsole.log(`isOk this.shareText : ${isOk} ${this.shareText}`)\n\t\t\tif(isOk){//合法\n\t\t\t\tthis.checkState = 'ok'\n\t\t\t}else{\n\t\t\t\tthis.checkState = 'fail'\n\t\t\t}\n\t\t\t// let token = await this.getAccessToken()\n\t\t\t// let that = this\n\t\t\t// wx.request({\n\t\t\t//   url: `https://api.weixin.qq.com/wxa/msg_sec_check?access_token=${token}`,\n\t\t\t//   data: {\n\t\t\t//    content:this.shareText\n\t\t\t//   },\n\t\t\t//   method:'post',\n\t\t\t//   success (res) {\n\t\t\t// \t\tconsole.log(res)\n\t\t\t//     that.shareText = res.data.errcode\n\t\t\t//   }\n\t\t\t// })\n\t\t},\n\t\t// test:throttle(async function(){\n\t\t// \tlet isOk = await this.msgSecCheck(this.shareText)\n\t\t// \tconsole.log(`isOk this.shareText : ${isOk} ${this.shareText}`)\n\t\t// \tif(isOk){//合法\n\t\t// \t\tthis.checkState = 'ok'\n\t\t// \t}else{\n\t\t// \t\tthis.checkState = 'fail'\n\t\t// \t}\n\t\t// },2000),\n\t\tchooseImage() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\tsizeType: ['compressed', 'original'],\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tthis.image = res.tempFilePaths[0];\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tcompress(){//压缩图片 图文分享要求分享图片大小不能超过20Kb\n\t\t\tconsole.log('开始压缩');\n\t\t\tlet img = this.image;\n\t\t\treturn new Promise((res) => {\n\t\t\t\tvar localPath = plus.io.convertAbsoluteFileSystem(img.replace('file://', ''));\n\t\t\t\tconsole.log('after' + localPath);\n\t\t\t\t// 压缩size\n\t\t\t\tplus.io.resolveLocalFileSystemURL(localPath, (entry) => {\n\t\t\t\t\tentry.file((file) => {// 可通过entry对象操作图片 \n\t\t\t\t\t\tconsole.log('getFile:' + JSON.stringify(file));\n\t\t\t\t\t\tif(file.size > 20480) {// 压缩后size 大于20Kb\n\t\t\t\t\t\t\tplus.zip.compressImage({\n\t\t\t\t\t\t\t\tsrc: img,\n\t\t\t\t\t\t\t\tdst: img.replace('.jpg', '2222.jpg').replace('.JPG', '2222.JPG'),\n\t\t\t\t\t\t\t\twidth: '10%',\n\t\t\t\t\t\t\t\theight: '10%',\n\t\t\t\t\t\t\t\tquality: 1,\n\t\t\t\t\t\t\t\toverwrite: true\n\t\t\t\t\t\t\t}, (event) => {\n\t\t\t\t\t\t\t\tconsole.log('success zip****' + event.size);\n\t\t\t\t\t\t\t\tlet newImg = img.replace('.jpg', '2222.jpg').replace('.JPG', '2222.JPG');\n\t\t\t\t\t\t\t\tres(newImg);\n\t\t\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\tcontent:'分享图片太大,需要请重新选择图片!',\n\t\t\t\t\t\t\t\t\tshowCancel:false\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, (e) => {\n\t\t\t\t\tconsole.log('Resolve file URL failed: ' + e.message);\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\tcontent:'分享图片太大,需要请重新选择图片!',\n\t\t\t\t\t\tshowCancel:false\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t})\n\t\t}\n\t}\n}\n"],"sourceRoot":""}