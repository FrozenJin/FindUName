{"version":3,"sources":["webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/main.js","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue?c650","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue?aa78","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue?bd2b","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue?0fde","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue?8d1e","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue?4ed7","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue?3149","webpack:///D:/Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue?b837"],"names":["createPage","Page","db","wx","cloud","database","userInfoSet","collection","userCountSet","allName","_","command","onShow","data","gender","noChanceModal","name","luckyNames","features","computed","bgColor","$store","getters","selectGender","selectFeature","filter","i","selected","map","text","methods","_getFeatureText","feature","_i18n","locale","clickFeature","index","selectedItems","item","length","go","freeList","includes","openId","canGenName","_getThreeName","luckyName","createTime","Date","Promise","all","_addCount","_addName","then","res","uni","hideLoading","switchTab","url","where","_openid","get","count","isShared","_id","doc","update","add","_getName_old","names","boys","girls","selectedFeature","some","characteristics","toLowerCase","indexOf","sort","a","b","Math","random","_getName","$","aggregate","regexp","forEach","it","match","RegExp","options","sample","size","end","result","list","firstGetedNames","funcArr","f","push","secendGetNames","Array","from","Set","flat","Infinity","hasNameFunc","hideModal"],"mappings":"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","file":"pages/home/selectFeature/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/home/selectFeature/index.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8e52dbb8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=8e52dbb8&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8e52dbb8\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX.2.1.1.20190716.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('8e52dbb8', component.options)\n    } else {\n      api.reload('8e52dbb8', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=8e52dbb8&scoped=true&\", function () {\n      api.rerender('8e52dbb8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Frozen-project/myweb-test-project/mpvue-test/uni-name/uni-name/pages/home/selectFeature/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=8e52dbb8&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.features, function(item, index) {\n    var m0 = _vm._getFeatureText(item)\n\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nconst db = wx.cloud.database()\r\nconst userInfoSet = db.collection('UserInfo')\r\nconst userCountSet = db.collection('UserCount')\r\nconst allName = db.collection('AllName')\r\nconst _ = db.command\r\n// import name from '@/static/json/nameLang.js'\r\n// var name = require('@/static/json/nameLang.js')  \r\nimport {formatTime} from '@/common'\r\nimport {features} from './features.js' \r\nexport default {\r\n\tonShow(){\r\n\t\t// allName.where({\r\n\t\t// \tgender:'girl',\r\n\t\t// \tcharacteristics: /(?=.*Achiever)(?=.*Problem-solver)(?=.*Wise)^.*$/i    ///\\b(Achiever|Problem-solver)\\b/i\r\n\t\t// }).get().then(res=>{\r\n\t\t// \tconsole.log(res)\r\n\t\t// })\r\n\t\t\r\n\t},\r\n  data () {\r\n    return {\r\n\t\t\tgender:'男',\r\n\t\t\tnoChanceModal:false,\r\n\t\t\tname:[],\r\n\t\t\tluckyNames:[],\r\n      features \r\n\t\t}\r\n  },\r\n\tcomputed: {\r\n\t\tbgColor() {\r\n\t\t\tif(this.$store.getters.selectGender == 'boy'){\r\n\t\t\t\treturn 'rgba(119,157,202,.3)'\r\n\t\t\t}else{\r\n\t\t\t\treturn 'rgba(244,175,196,.5)'\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectFeature(){//选中的特性\r\n\t\t\tlet selectFeature = this.features.filter(i => {\r\n\t\t\t  return i.selected\r\n\t\t\t}).map(i => {\r\n\t\t\t  return i.text\r\n\t\t\t})\r\n\t\t\treturn selectFeature\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\t_getFeatureText(feature){//获取特性的显示内容（中 英）\r\n\t\t\tlet text = feature['text_' + this._i18n.locale]\r\n\t\t\treturn text\r\n\t\t},\r\n\t\tclickFeature(index){\r\n\t\t\tlet selectedItems = this.features.filter(item=>{\r\n\t\t\t\treturn item.selected\r\n\t\t\t})\r\n\t\t\t//最多三个\r\n\t\t\tif(this.features[index].selected == false && selectedItems.length == 3){\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t//选中\r\n\t\t\tthis.features[index].selected = !this.features[index].selected\r\n\t\t},\r\n\t\tgo:async function(){ // 根据选择的特性 生成名字\r\n\t\t\t//'o-O3q4hB8pbAWheizqubEkNxp5CE',\r\n\t\t\tlet freeList = ['o-O3q4oSsg2fZoAVU_uAXtE9umvs','o-O3q4iciNyL-gcNxCqSyIXmKrIw','o-O3q4ifYFiqPjcQAF6fp6KHN4JI'] // 可以无限生成name的白名单\r\n\t\t\tif(!freeList.includes(this.$store.getters.openId)){\r\n\t\t\t\tif(!this.$store.getters.canGenName){\r\n\t\t\t\t\tthis.noChanceModal = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//选中的特性\r\n\t\t\tif(this.selectFeature.length == 0){\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t//幸运名 3个\r\n\t\t\t// let luckyName = this.getName().filter((name,index)=>{\r\n\t\t\t// \treturn index <= 2\r\n\t\t\t// })\r\n      let luckyName = await this._getThreeName()\r\n\t\t\t// console.log(luckyName)\r\n\t\t\tlet data = {\r\n        openId : this.$store.getters.openId,\r\n\t\t\t\tcreateTime : formatTime(new Date()),\r\n\t\t\t\tselectFeature : this.selectFeature,\r\n\t\t\t\tselectGender : this.$store.getters.selectGender,\r\n\t\t\t\tluckyName\r\n\t\t\t}\r\n\r\n      Promise.all([this._addCount(),this._addName(data)])\r\n      .then(res=>{\r\n        uni.hideLoading()\r\n        uni.switchTab({\r\n          url: \"/pages/history/index\"\r\n        })\r\n      })\r\n\t\t},\r\n    _addCount(){ //添加用户的命名次数\r\n      userCountSet.where({\r\n        _openid: this.$store.getters.openId\r\n      })\r\n      .get()\r\n      .then(res => {\r\n        //890198e15d541d60143a4e1603aa90b5\r\n        let {count , isShared , _id} = res.data[0]\r\n\r\n        userCountSet\r\n        .doc(_id)\r\n        .update({\r\n          data: {\r\n            count:count +1\r\n          }\r\n        }).then()\r\n      })\r\n    },\r\n    _addName(data){ //添加用户的命名\r\n      userInfoSet.add({\r\n        data\r\n      })\r\n    },\r\n\t\t_getName_old(){ //获取名字\r\n\t\t  let names = []\r\n\t\t  if (this.$store.getters.selectGender == \"boy\"){\r\n\t\t    names = this.name.boys\r\n\t\t  }else{\r\n\t\t    names = this.name.girls\r\n\t\t  }\r\n\r\n\t\t  let selectedFeature = this.features.filter(i => {\r\n\t\t    return i.selected\r\n\t\t  }).map(i => {\r\n\t\t    return i.text\r\n\t\t  })\r\n\r\n\t\t  names = names.filter(item=>{\r\n\t\t    let res = true\r\n\r\n\t\t    // let curFeatures = Array.isArray(item.characteristics) ? item.characteristics : item.characteristics.split(',')\r\n\t\t    // curFeatures.forEach((f,index) => {\r\n\t\t    //   curFeatures[index] = f.trim()\r\n\t\t    // })\r\n\t\t    // let allIn = selectedFeature.some(i=>{\r\n\t\t    //   return !curFeatures.includes(i)\r\n\t\t    // })\r\n\t\t    // if (allIn) {\r\n\t\t    //   res = false\r\n\t\t    // }\r\n\r\n        res = selectedFeature.some(i=>{\r\n          // console.log(item.Characteristics)\r\n          return item.characteristics && item.characteristics.toLowerCase().indexOf(i.toLowerCase()) >= 0\r\n        })\r\n\r\n\t\t    return res\r\n\t\t  })\r\n\r\n\t\t  // names.forEach(i=>{\r\n\t\t  //   let arr = i.characteristics.split(',')\r\n\t\t  //   arr.forEach((f, index) => {\r\n\t\t  //     arr[index] = f.trim()\r\n\t\t  //   })\r\n\t\t  //   i.characteristicsArr = arr\r\n\t\t  // })\r\n\t\t  names.sort((a, b)=>{\r\n\t\t    return Math.random() > .5 ? -1 : 1;\r\n\t\t  })\r\n\t\t  // console.log(names)\r\n\t\t  return names\r\n\t\t},\r\n\t\t_getName:async function(features) {//获取名字\r\n\t\t\tconst $ = db.command.aggregate\r\n\t\t\t//拼接 模糊匹配 STR\r\n\t\t\tlet regexp = ''\r\n\t\t\t// this.selectFeature.forEach(it=>{\r\n\t\t\t// \tregexp += `(?=.*${it})`\r\n\t\t\t// })\r\n\t\t\tfeatures.forEach(it=>{\r\n\t\t\t\tregexp += `(?=.*${it})`\r\n\t\t\t})\r\n\t\t\tregexp += '^.*$'\r\n\t\t\t\r\n\t\t\tlet result = await allName.aggregate()\r\n\t\t\t\t.match({\r\n\t\t\t\t\tgender : this.$store.getters.selectGender, // 性别\r\n\t\t\t\t\tcharacteristics:db.RegExp({ // 模糊匹配特性\r\n\t\t\t\t\t\tregexp,\r\n\t\t\t\t\t\toptions: 'i',\r\n\t\t\t\t\t}) \r\n\t\t\t\t\t///(?=.*Achiever)(?=.*Problem-solver)(?=.*Wise)^.*$/i\r\n\t\t\t\t})\r\n\t\t\t\t.sample({\r\n\t\t\t\t\tsize: 3\r\n\t\t\t\t})\r\n\t\t\t\t.end()\r\n\t\t\t\r\n\t\t\t//没有数据的特殊处理\r\n\t\t\tlet list = result.list\r\n\t\t\treturn list\r\n\t\t},\r\n\t\t//不管什么情况获取3个名字\r\n\t\t_getThreeName:async function(){\r\n\t\t\tlet firstGetedNames = await this._getName(this.selectFeature) //第一个获取的\r\n\t\t\t// console.log(`firstGetedNames:{firstGetedNames}`)\r\n\t\t\tif(firstGetedNames.length < 3){\r\n\t\t\t\tlet funcArr = []\r\n\t\t\t\tfeatures.forEach(f=>{\r\n\t\t\t\t\tfuncArr.push(this._getName([f]))\r\n\t\t\t\t})\r\n\t\t\t\t//同步执行多个promise\r\n\t\t\t\tawait Promise.all(funcArr).then(res=>{\r\n\t\t\t\t\t//结果 乱序下\r\n\t\t\t\t\tlet secendGetNames = Array.from(new Set(res.flat(Infinity))).sort((a, b)=>{\r\n\t\t\t\t\t\treturn Math.random() > .5 ? -1 : 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//补足3个结果\r\n\t\t\t\t\tsecendGetNames.forEach(i=>{\r\n\t\t\t\t\t\t//是否已经有同名\r\n\t\t\t\t\t\tlet hasNameFunc = function () {\r\n\t\t\t\t\t\t\treturn firstGetedNames.some(it=>{\r\n\t\t\t\t\t\t\t\treturn it.name === i.name\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(firstGetedNames.length<3 && !hasNameFunc()){\r\n\t\t\t\t\t\t\tfirstGetedNames.push(i)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(`firstGetedNames2:{firstGetedNames}`)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t// console.log(`firstGetedNames3:{firstGetedNames}`)\r\n\t\t\treturn firstGetedNames\r\n\t\t},\r\n\t\thideModal(){//隐藏模态框\r\n\t\t\tthis.noChanceModal = false\r\n\t\t}\r\n\t}\r\n}\r\n","import mod from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin","import mod from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=1&id=8e52dbb8&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../HBuilderX.2.1.1.20190716.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=1&id=8e52dbb8&scoped=true&lang=less&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}